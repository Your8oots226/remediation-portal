<style>
    /* Professional Row Layout */
    .lib-row { 
        display: grid; 
        grid-template-columns: 1fr 2fr 1.5fr; 
        gap: 15px; 
        background: white; 
        padding: 15px; 
        border-bottom: 1px solid #e2e8f0;
        align-items: center;
    }
    .lib-row:hover { background: #f8fafc; }
    
    .comment-input {
        width: 100%;
        padding: 8px;
        border: 1px solid #cbd5e1;
        border-radius: 4px;
        font-size: 0.85rem;
    }

    .row-header {
        font-weight: 800;
        font-size: 0.7rem;
        color: #64748b;
        text-transform: uppercase;
        padding: 10px 15px;
        background: #f1f5f9;
        display: grid;
        grid-template-columns: 1fr 2fr 1.5fr;
        gap: 15px;
    }
</style>

<script>
function showModule(type) {
    const body = document.getElementById('moduleBody');
    body.innerHTML = "";
    if (type === 'brief') {
        document.getElementById('moduleTitle').innerText = "Scope Builder";
        const cats = [...new Set(db.library.map(i => findValue(i, 'category')))].filter(c => c);

        cats.forEach(cat => {
            const items = db.library.filter(i => findValue(i, 'category') === cat);
            
            let rows = items.map(i => {
                const sub = findValue(i, 'subcategory') || "General";
                const desc = findValue(i, 'description') || "";
                return `
                    <div class="lib-row">
                        <div><strong>${sub}</strong></div>
                        <div style="font-size:0.9rem;">${desc}</div>
                        <div>
                            <input type="text" class="comment-input" placeholder="Add site notes...">
                        </div>
                    </div>`;
            }).join('');

            body.innerHTML += `
                <div class="library-section" style="padding:0; overflow:hidden;">
                    <div style="padding:15px; background:var(--primary); color:white; font-weight:bold;">${cat}</div>
                    <div class="row-header">
                        <div>Subcategory</div>
                        <div>Description</div>
                        <div>Comments / Quantities</div>
                    </div>
                    ${rows}
                </div>`;
        });
    }
    switchView('view-content');
}
</script>